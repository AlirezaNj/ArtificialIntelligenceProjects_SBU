from ai import *
from sim import *
from gui import *


tests = [
    {"coordinates": [[1, 1, 1], [1, 1, 0], [1, 0, 0], [0, 0, 0], [0, 0, 1], [0, 1, 1], [0, 1, 2], [-1, 1, 2], [-1, 0, 2], [0, 0, 2], [0, -1, 2], [0, -1, 1], [0, -1, 0], [-1, -1, 0], [-2, -1, 0], [-2, -1, 1], [-1, -1, 1], [-1, -1, 2], [-2, -1, 2], [-2, 0, 2], [-2, 0, 1], [-1, 0, 1], [-1, 0, 0], [-2, 0, 0], [-2, 1, 0], [-2, 1, 1], [-2, 1, 2]], "stick_together": [[0, 1], [1, 2], [2, 3], [5, 6], [6, 7], [9, 10], [10, 11], [11, 12], [17, 18], [20, 21], [25, 26]]},
    {"coordinates": [[0, 0, -1], [0, 0, 0], [-1, 0, 0], [-1, 0, -1], [-2, 0, -1], [-2, -1, -1], [-2, -1, 0], [-2, 0, 0], [-2, 0, 1], [-2, -1, 1], [-2, -2, 1], [-1, -2, 1], [-1, -2, 0], [-2, -2, 0], [-2, -2, -1], [-1, -2, -1], [-1, -1, -1], [0, -1, -1], [0, -2, -1], [0, -2, 0], [0, -2, 1], [0, -1, 1], [-1, -1, 1], [-1, -1, 2], [0, -1, 2], [0, 0, 2], [0, 0, 1]], "stick_together": [[1, 2], [4, 5], [9, 10], [11, 12], [13, 14], [15, 16], [17, 18], [18, 19]]},
    {"coordinates": [[2, 2, -2], [2, 2, -1], [2, 1, -1], [1, 1, -1], [1, 0, -1], [2, 0, -1], [2, 0, 0], [1, 0, 0], [0, 0, 0], [0, 0, 1], [0, 0, 2], [1, 0, 2], [2, 0, 2], [2, -1, 2], [1, -1, 2], [0, -1, 2], [0, -1, 3], [1, -1, 3], [1, -2, 3], [0, -2, 3], [0, -3, 3], [1, -3, 3], [2, -3, 3], [2, -3, 2], [1, -3, 2], [0, -3, 2], [0, -2, 2]], "stick_together": [[1, 2], [5, 6], [8, 9], [10, 11], [12, 13], [17, 18], [20, 21], [21, 22], [24, 25]]},
    {"coordinates": [[0, -2, 0], [0, -1, 0], [0, 0, 0], [0, 0, -1], [0, 0, -2], [0, -1, -2], [0, -1, -1], [0, -2, -1], [0, -2, -2], [-1, -2, -2], [-1, -1, -2], [-1, 0, -2], [-1, 0, -1], [-2, 0, -1], [-2, -1, -1], [-2, -1, 0], [-2, 0, 0], [-1, 0, 0], [-1, -1, 0], [-1, -1, -1], [-1, -2, -1], [-1, -2, 0], [-2, -2, 0], [-2, -2, -1], [-2, -2, -2], [-2, -3, -2], [-2, -4, -2]], "stick_together": [[1, 2], [2, 3], [11, 12], [17, 18], [19, 20], [22, 23]]},
    {"coordinates": [[2, 2, -2], [2, 1, -2], [2, 1, -1], [2, 0, -1], [1, 0, -1], [1, 1, -1], [1, 2, -1], [2, 2, -1], [2, 2, 0], [1, 2, 0], [0, 2, 0], [0, 2, -1], [0, 1, -1], [0, 1, 0], [1, 1, 0], [2, 1, 0], [2, 0, 0], [1, 0, 0], [0, 0, 0], [0, 0, -1], [0, 0, -2], [0, -1, -2], [0, -2, -2], [0, -2, -3], [0, -1, -3], [0, 0, -3], [0, 0, -4]], "stick_together": [[0, 1], [2, 3], [3, 4], [7, 8], [8, 9], [12, 13], [16, 17], [18, 19], [20, 21], [25, 26]]},
    {"coordinates": [[0, 0, -1], [0, 0, -2], [0, -1, -2], [0, -1, -1], [0, -1, 0], [0, 0, 0], [0, 0, 1], [1, 0, 1], [2, 0, 1], [2, -1, 1], [2, -1, 2], [1, -1, 2], [1, 0, 2], [2, 0, 2], [2, 1, 2], [2, 1, 1], [2, 1, 0], [1, 1, 0], [0, 1, 0], [0, 1, 1], [1, 1, 1], [1, 1, 2], [0, 1, 2], [0, 0, 2], [0, -1, 2], [0, -1, 1], [1, -1, 1]], "stick_together": [[1, 2], [6, 7], [7, 8], [9, 10], [11, 12], [13, 14], [14, 15], [15, 16], [17, 18], [21, 22], [24, 25]]},
    {"coordinates": [[2, 2, -2], [3, 2, -2], [3, 2, -1], [3, 2, 0], [4, 2, 0], [4, 2, -1], [4, 1, -1], [3, 1, -1], [3, 0, -1], [2, 0, -1], [2, 1, -1], [2, 2, -1], [2, 2, 0], [1, 2, 0], [0, 2, 0], [0, 1, 0], [1, 1, 0], [1, 0, 0], [0, 0, 0], [0, 0, -1], [0, 0, -2], [0, -1, -2], [0, -2, -2], [-1, -2, -2], [-1, -1, -2], [-1, 0, -2], [-2, 0, -2]], "stick_together": [[1, 2], [6, 7], [10, 11], [18, 19], [23, 24], [25, 26]]},
    {"coordinates": [[-1, -3, 0], [-1, -3, 1], [-1, -3, 2], [0, -3, 2], [0, -2, 2], [1, -2, 2], [1, -2, 1], [1, -2, 0], [1, -1, 0], [1, -1, 1], [1, -1, 2], [0, -1, 2], [-1, -1, 2], [-1, -2, 2], [-1, -2, 1], [-1, -1, 1], [0, -1, 1], [0, -1, 0], [0, 0, 0], [-1, 0, 0], [-1, 1, 0], [-1, 1, -1], [-2, 1, -1], [-2, 1, 0], [-2, 2, 0], [-2, 2, -1], [-2, 2, -2]], "stick_together": [[2, 3], [3, 4], [4, 5], [6, 7], [7, 8], [9, 10], [13, 14], [14, 15], [15, 16], [19, 20], [20, 21], [21, 22], [22, 23]]},
    {"coordinates": [[1, 2, 0], [2, 2, 0], [2, 1, 0], [2, 1, 1], [2, 0, 1], [1, 0, 1], [0, 0, 1], [0, 0, 0], [0, -1, 0], [0, -1, -1], [0, 0, -1], [-1, 0, -1], [-2, 0, -1], [-2, -1, -1], [-1, -1, -1], [-1, -1, -2], [-1, 0, -2], [-2, 0, -2], [-2, 0, -3], [-1, 0, -3], [0, 0, -3], [0, -1, -3], [0, -2, -3], [0, -2, -2], [-1, -2, -2], [-1, -2, -3], [-2, -2, -3]], "stick_together": [[1, 2], [2, 3], [8, 9], [9, 10], [12, 13], [14, 15], [15, 16], [17, 18], [18, 19]]},
    {"coordinates": [[-1, 1, -1], [0, 1, -1], [0, 0, -1], [0, 0, 0], [0, -1, 0], [-1, -1, 0], [-1, -1, -1], [0, -1, -1], [1, -1, -1], [1, -1, 0], [1, -1, 1], [2, -1, 1], [3, -1, 1], [3, -2, 1], [2, -2, 1], [1, -2, 1], [1, -3, 1], [2, -3, 1], [2, -3, 0], [1, -3, 0], [1, -3, -1], [2, -3, -1], [3, -3, -1], [3, -2, -1], [2, -2, -1], [1, -2, -1], [1, -2, 0]], "stick_together": [[0, 1], [1, 2], [5, 6], [7, 8], [10, 11], [13, 14], [14, 15], [16, 17], [17, 18], [18, 19], [19, 20], [21, 22], [23, 24], [24, 25], [25, 26]]},
]

if __name__ == "__main__":
    for i in range(len(tests)):
        print('\nTesting problem ', i+1)
        game = Simulator(tests[i]['coordinates'], tests[i]['stick_together'])
        interface=Interface()
        agent = Agent()
        gui = Graphics()

        print("Initial coordination: ")
        action_count = 0
        while not (interface.goal_test(game)):
            gui.display(game)
            action = agent.act(interface.perceive(game))
            interface.evolve(game, action)
            if not interface.valid_state(game): raise 'reached invalid state'
            action_count += 1

        print(
            "\nyour cost (number of actions):", action_count,
            '\n\ncurrent map state:'
        )
        gui.display(game)
